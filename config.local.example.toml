[paths]
# Pflicht: JA
# Absoluter Pfad zum Ziel-Repository, in dem die Agenten arbeiten sollen.
repo_root = "/home/you/git/your-project"

# Pflicht: NEIN
# Requirements-Ordner. Standard passt fuer dieses agents-Repo.
requirements_root = "./requirements"

# Pflicht: NEIN
# Doku-Basisordner im Ziel-Repo. Leer = <repo_root>/docs.
docs_dir = ""

# Pflicht: NEIN
# Produktvision-Ordner. Leer = <docs_dir>/product-operating-system.
product_vision_dir = ""

[loops]
# Optionales Tuning fuer Bundle-Groessen und Polling.
bundle_min_size = 5
bundle_max_size = 20
po_poll_seconds = 20
delivery_poll_seconds = 20
max_retries = 3
retry_delay_seconds = 2
# Nach N Idle-Zyklen darf Delivery trotz zu kleinem Bundle starten.
force_underfilled_after_cycles = 3

[flow]
# Legacy run.js Default: standard | dev-only
default_mode = "standard"
idle_poll_seconds = 300
max_retries = 3
retry_delay_seconds = 2

[run_defaults]
# Legacy run.js Defaults
flow = "standard"
max_req = 0
verbose = false
detail = false
# hard | soft | none | snapshot
preflight = "soft"
manual_downstream = false

[preflight]
snapshot_commit_message_prefix = "chore(flow): preflight snapshot"

[deploy]
# check | commit | commit_push
mode = "commit_push"
final_push_on_success = true
require_clean_start_for_commits = true

[po]
# intake | vision
default_mode = "vision"
vision_max_cycles = 100
vision_max_requirements = 1000
vision_stable_cycles = 2
intake_max_per_cycle = 3
intake_loop_cooldown_cycles = 3
intake_idempotence_enabled = true
# Backlog-Autopromotion gegen Stau.
backlog_promote_enabled = true
backlog_promote_after_cycles = 3
backlog_promote_min_business_score = 80
backlog_promote_max_per_cycle = 2

[arch]
# always | triggered | never
routing_mode = "triggered"
require_for_scopes = ["fullstack"]
require_for_review_risks = ["high"]
require_for_review_scopes = ["qa_sec", "full"]
trigger_frontmatter_flags = ["arch_required", "needs_arch"]
trigger_keywords = [
  "auth",
  "authorization",
  "permission",
  "security",
  "secret",
  "token",
  "login",
  "password",
  "encryption",
  "privacy",
  "compliance",
  "gdpr",
  "pii",
  "payment",
  "billing",
  "migration",
  "schema",
  "database",
  "prisma",
  "webhook",
  "oauth",
  "rbac",
  "acl",
  "sso",
  "destructive"
]
digest_enabled = true
digest_file = ".runtime/arch-docs-digest.md"
digest_max_files = 12
digest_max_headings_per_file = 20
max_retries = 0

[dev_routing]
# fullstack_only | split
mode = "fullstack_only"
default_scope = "fullstack"

[dev_agents]
# Mindestens ein Agent muss true sein.
use_fe = false
use_be = false
use_fs = true

[dev]
# DEV Watchdog und Recovery-Leiter.
run_timeout_seconds = 900
same_thread_retries = 1
fresh_thread_retries = 1

[qa]
# Projektspezifische QA-Kommandos. Leer = generisch.
mandatory_checks = []

[review]
# Legacy-Optionen (vor allem fuer run.js Kompatibilitaet).
strategy = "bundle"
parallel = false
default_risk = "low"
medium_scope_policy = "single_specialist"

[models]
# Modellzuordnung pro Agent.
default = "gpt-5.3-codex-spark"
po = "gpt-5.3-codex"
arch = "gpt-5.3-codex"
reqeng = "gpt-5.3-codex"
sec = "gpt-5.3-codex"
dev_fe = "gpt-5.3-codex-spark"
dev_be = "gpt-5.3-codex-spark"
dev_fs = "gpt-5.3-codex-spark"
qa = "gpt-5.3-codex-spark"
uat = "gpt-5.3-codex-spark"
maint = "gpt-5.3-codex-spark"
ux = "gpt-5.3-codex-spark"
deploy = "gpt-5.3-codex-spark"

[codex]
# Basis-Codex-Ausfuehrungsprofil.
model = "gpt-5.3-codex-spark"
approval_policy = "never"
sandbox_mode = "danger-full-access"
model_reasoning_effort = "xhigh"
